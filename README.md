# CPP-CSV-TIKZ
To use C++ computing and Tikz drawing powers together.

     Gang Liu (gl.cell@outlook, http://orcid.org/0000-0003-1575-9290)
          and
     Shiwei Huang (huang937@gmail.com)
     
It is absolutely a good idea to combine FORTRAN/C/C++ computing and Tikz drawing powers. To do this, we may use FORTRAN/C/C++ to perform all key computations, then output all needed results into CSV files. Since Latex/Tikz can read CSV data files, it can use the data to draw figures accordingly. For the three languages, we have separate specific  repositories: 

     https://github.com/LiuGangKingston/FORTRAN-CSV-TIKZ.git
     https://github.com/LiuGangKingston/C-CSV-TIKZ.git
     https://github.com/LiuGangKingston/CPP-CSV-TIKZ.git

This one is for C++. 

In Latex/TikZ, we will use the "CSVSIMPLE" package. Since it supports the option "[head to column names]" in the command "\csvreader", the CSV files are better generated with all names for the data columns as the first line. As "CSVSIMPLE" documented, any pair of neighbor names must be separated by the comma symbol ",", no other character (even a space) is permitted in the first line. Once it is generated properly, the command

\csvreader[head to column names]{THE CSV FILE}  {}  {
... DRAW ANYTHING HERE ...
}

in a tex file can read it, and automatically get macros in form of "\COLUMNNAME" for all comlumn data. Another caution is to avoid "," at the end of any line of the data file. In fact, the above command also invokes an iteration: to apply data line by line to perform the corresponding work of "{... DRAW ANYTHING HERE ...}". 

As in our example01, two CSV files are generated: 
    
    ofstream afile;
    afile.open("setup.scalars.csv");
    ...
    afile.close();
    afile.open("iterated.alldata.csv");
    ...
    afile.close();

The first contains data computed only one-time for figure setup. The second one contains all itereated data for drawing more than one similar things in the example. To avoid problems, all data generated by the FORTRAN/C/C++ code and needed for "DRAW ANYTHING HERE" in the command
\csvreader[head to column names]{iterated.alldata.csv}  {}  {
... DRAW ANYTHING HERE ...
}
are outputted to the "iterated.alldata.csv" file, INCLUDING THOSE WHICH WERE EVEN ALREADY OUTPUT INTO PREVIOUS CSV FILES. 

In the head file CppCSVTikZ.h, coded "Class CppCSVTikZFileGroup" can make it easy to split a large amount of data to be output into a group of CSV files, and another large amount of data to be output into another group of CSV files, and another another, unlimited. Hope this may be helpful to reduce hardware memory requirement in processing tex files. As an example, it may be used as:

    int  i, startingline=1, totallines=500, datalinesineachfile=50;
    double  morevariables;
    ...
    CppCSVTikZFileGroup bigfile("iterated.alldata.",startingline,totallines,datalinesineachfile);
    bigfile.FillFirstLine("variablenamesseperatebycommaswithoutanythingelse");
    for(i=startingline; i<=totallines; i++) {
        ...
       *(bigfile.OutputLine(i))<< variables << PickTikZColor(i) << endl;
    }
    
It is used in example01.500beams.data.split and example02.ellipsoidal. 



